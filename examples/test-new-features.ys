@main

# Test new features
# - No semicolons
# - Modern syntax with fn and on blocks
# - repeat loop

config {
  board: arduino_uno,
  clock: 16MHz,
  uart: on,
  port: auto
}

const int LED_PIN = 13

# Function with return type
fn add(int a, int b) -> int {
    return a + b
}

# Function without return type
fn blink() {
    digitalWrite(LED_PIN, HIGH)
    delay(500)
    digitalWrite(LED_PIN, LOW)
    delay(500)
}

on start {
    pinMode(LED_PIN, OUTPUT)
    mut int result = add(5, 3)
}

on loop {
    # Repeat 3 times
    repeat(3) {
        blink()
    }
    delay(1000)
}
