@main

# Sensor Reading Example
# Read analog sensor and control LED based on threshold

config {
  board: arduino_uno,
  clock: 16MHz,
  uart: on,
  port: auto
}

const int SENSOR_PIN = 0
const int LED_PIN = 13
const int THRESHOLD = 512

on start {
    pinMode(LED_PIN, OUTPUT)
}

on loop {
    mut int sensorValue = analogRead(SENSOR_PIN)
    
    if (sensorValue > THRESHOLD) {
        digitalWrite(LED_PIN, HIGH)
    } else {
        digitalWrite(LED_PIN, LOW)
    }
    
    delay(100)
}

